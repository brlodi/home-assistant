################################################################################
# HOME ASSISTANT CONFIGURATION - Benjamin Lodi (brlodi@gmail.com)              #
################################################################################
# Running under Hass.io on HassOS                                              #
# Last tested HassOS version:         1.9                                      #
# Last tested supervisor version:     127                                      #
# Last tested Home Assistant version: 0.76.1                                   #
################################################################################
homeassistant:
  name: Home
  latitude: !secret home-latitude
  longitude: !secret home-longitude
  elevation: !secret home-elevation
  unit_system: imperial
  time_zone: !secret home-tz
  auth_providers:
    - type: homeassistant
    - type: legacy_api_password
  customize_domain: !include customize_domain.yaml
  customize_glob: !include customize_glob.yaml
  customize: !include customize.yaml



################################################################################
# Hardware                                                                     #
################################################################################
zwave:
  usb_path: /dev/ttyUSB0
  polling_interval: 30000
  device_config_glob: !include zwave_device_config.yaml
zha:
  usb_path: /dev/ttyUSB1
  database_path: /config/zigbee.db



################################################################################
# Front End                                                                    #
################################################################################

# Core
auth:
config:
frontend:
hassio:
history:
http:
  base_url: !secret url_home_assistant
  ssl_certificate: /ssl/fullchain.pem
  ssl_key: /ssl/privkey.pem
  api_password: !secret ha_api_password
logbook:
map:
updater:

# Integrate Hass.io addons in sidebar
panel_iframe:
  pihole:
    title: Pi-hole
    icon: mdi:cancel
    url: !secret url_pihole



################################################################################
# External Platform Integrations                                               #
################################################################################

ios:

homekit:
  auto_start: false
  filter:
    include_entities:
      - binary_sensor.bedroom_window
      - binary_sensor.dome_motion_detector_living_room_sensor
      - binary_sensor.front_door
      - binary_sensor.living_room_window
      - light.ge_jasco_wall_dimmer_bedroom_level
      - light.ge_jasco_wall_dimmer_dining_nook_level
      - light.ge_jasco_wall_dimmer_living_room_level
      - light.ikea_tradfri_1000lm_entryway
      - media_player.living_room
      - script.good_night
      - switch.tplink_hs110__bedroom_fan
      - switch.tplink_hs110__living_room_ceiling_light
  entity_config:
    media_player.living_room:
      feature_list:
        - feature: on_off
        - feature: play_pause
        - feature: toggle_mute



################################################################################
# Entity & Service Configuration                                               #
################################################################################

# WARNING: this configuration method breaks the editors in the Config component
# I don't use them because I prefer the logical separation afforded by a
# one-item-per-file paradigm, instead of a giant list in one file. Unfortunately
# I still need the Z-Wave configuration panel, so I can't just disable the
# Config component.
automation: !include_dir_merge_list automations/
script:     !include_dir_named scripts/

# Domains taking lists of entities
binary_sensor:  !include_dir_list entities/binary_sensors
device_tracker: !include_dir_list entities/device_trackers
media_player:   !include_dir_list entities/media_players
scene:          !include_dir_list scenes
sensor:         !include_dir_list entities/sensors
switch:         !include_dir_list entities/switches
weather:        !include_dir_list entities/weather

# Domains taking dictionaries of named entities (each filename becomes a key)
group:          !include_dir_named groups
input_datetime: !include_dir_named entities/inputs_datetime
input_number:   !include_dir_named entities/inputs_number
rest_command:   !include_dir_named entities/rest_commands
shell_command:  !include_dir_named entities/shell_commands
timer:          !include_dir_named entities/timers
zone:           !include_dir_named zones

# Standalone domains
sun:
